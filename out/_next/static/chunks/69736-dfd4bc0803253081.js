"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69736],{19721:function(e,t,n){function a(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),n(99775)},51787:function(e,t,n){n.d(t,{u:function(){return g},t:function(){return T}});var a=n(20568),i=n(85738);let o=(0,i.ax)({id:84532,name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}],testnet:!0}),l=(0,i.ax)({id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}]}),r=(0,i.ax)({id:11155420,name:"OP Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com",apiUrl:"https://optimism-sepolia.blockscout.com/api"}],testnet:!0}),s=(0,i.ax)({id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io"}]}),c=(0,i.ax)({id:999999999,name:"Zora Sepolia",nativeCurrency:{decimals:18,name:"Zora Sepolia",symbol:"ETH"},blockExplorers:[{name:"Zora Sepolia Explorer",url:"https://sepolia.explorer.zora.energy/",apiUrl:"https://sepolia.explorer.zora.energy/api"}],testnet:!0}),u=(0,i.ax)({id:7777777,name:"Zora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},blockExplorers:[{name:"Explorer",url:"https://explorer.zora.energy",apiUrl:"https://explorer.zora.energy/api"}]}),d=[l.id,o.id,s.id,r.id,u.id,c.id,34443,919,42220,44787,204,5611];var p=n(27180),x=n(94646),h=n(45890),m=n(78725);async function y(e){var t,a,i,o;let l;let{transaction:r}=e,s=null!==(i=null!==(a=e.from)&&void 0!==a?a:null===(t=e.account)||void 0===t?void 0:t.address)&&void 0!==i?i:void 0,c=await (0,x.q)(r.gas)||await (0,m.Q)({transaction:r,from:s}),u=await (0,p.o)({client:r.client,chain:r.chain});if(o=r.chain,d.includes(o.id)){let{estimateL1Fee:e}=await n.e(82295).then(n.bind(n,82295));l=await e({transaction:r})}else l=0n;let y=c*u+l;return{ether:(0,h.n9)(y),wei:y}}var v=n(71551),f=n(73303),b=n(80383);function T(e){let{showPayModal:t,gasless:n,wallet:i,switchChain:o}=e,l=null==i?void 0:i.getAccount();return(0,a.useMutation)({mutationFn:async e=>{var a;i&&e.chain.id!==(null===(a=i.getChain())||void 0===a?void 0:a.id)&&(await o(e.chain),l=i.getAccount());let r=l;if(!r)throw Error("No active account");return t?new Promise((a,i)=>{let o=async()=>{try{let t=await (0,v.sendTransaction)({transaction:e,account:r,gasless:n});a(t)}catch(e){i(e)}};(async()=>{try{if(!(await (0,b.MY)(e.client)).find(t=>t.chain.id===e.chain.id)){o();return}let[n,l]=await Promise.all([(0,f.p)({address:r.address,chain:e.chain,client:e.client}),g(e,null==r?void 0:r.address)]),s=n.value;if(l<s){o();return}t({tx:e,sendTx:o,rejectTx:i,resolveTx:a,totalCostWei:l,walletBalance:n})}catch(e){console.error("Failed to estimate cost",e),o()}})()}):(0,v.sendTransaction)({transaction:e,account:r,gasless:n})}})}async function g(e,t){try{let n=await y({transaction:e,from:t}),a=n.wei/10n,i=await (0,x.q)(e.value);return n.wei+a+(i||0n)}catch(a){if(t)return await g(e);let n=await (0,x.q)(e.value);if(!n)return 0n;return n+n/100n}}},62830:function(e,t,n){n.d(t,{p:function(){return w}});var a=n(3827),i=n(62177),o=n(64090),l=n(4966),r=n(72568),s=n(51787),c=n(57146),u=n(37697),d=n(99263),p=n(89288),x=n(97285),h=n(4654),m=n(972),y=n(53326),v=n(31137),f=n(3702),b=n(32788),T=n(48762),g=n(86122),E=n(46226);function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,g.r)(),n=(0,E.l)(),i=(0,g.r)(),l=e.payModal,r=!0;if((!1===l||e.gasless)&&(r=!1),t&&"smart"===t.id){let e=t.getConfig();"sponsorGas"in e&&!0===e.sponsorGas&&(r=!1),"gasless"in e&&!0===e.gasless&&(r=!1)}let u=(0,o.useContext)(c.SetRootElementContext);return(0,s.t)({showPayModal:r&&!1!==l?e=>{u((0,a.jsx)(C,{tx:e.tx,onComplete:e.sendTx,onClose:()=>{u(null),e.rejectTx(Error("User rejected transaction by closing modal"))},onTxSent:e.resolveTx,client:e.tx.client,localeId:(null==l?void 0:l.locale)||"en_US",supportedTokens:null==l?void 0:l.supportedTokens,theme:(null==l?void 0:l.theme)||"dark",txCostWei:e.totalCostWei,walletBalanceWei:e.walletBalance.value,nativeTokenSymbol:e.walletBalance.symbol,payOptions:{buyWithCrypto:null==l?void 0:l.buyWithCrypto,buyWithFiat:null==l?void 0:l.buyWithFiat,purchaseData:null==l?void 0:l.purchaseData}}))}:void 0,gasless:e.gasless,switchChain:n,wallet:i})}function C(e){return(0,a.jsx)(l.CustomThemeProvider,{theme:e.theme,children:(0,a.jsx)(h.Modal,{open:!0,size:"compact",setOpen:t=>{t||e.onClose()},children:(0,a.jsx)(j,{...e})})})}function j(e){let t=(0,d.q)(e.localeId),[n,i]=(0,o.useState)("buy");return t.data?"execute-tx"===n?(0,a.jsx)(k,{tx:e.tx,closeModal:e.onClose,onTxSent:e.onTxSent}):"tx-history"===n?(0,a.jsx)(x.BuyTxHistory,{client:e.client,onBack:()=>{i("buy")},onDone:()=>{i("execute-tx")},isBuyForTx:!0,isEmbed:!1}):(0,a.jsx)(p.I,{isEmbed:!1,client:e.client,onViewPendingTx:()=>{i("tx-history")},supportedTokens:e.supportedTokens,connectLocale:t.data,buyForTx:{balance:e.walletBalanceWei,cost:e.txCostWei,tx:e.tx,tokenSymbol:e.nativeTokenSymbol},theme:"string"==typeof e.theme?e.theme:e.theme.type,payOptions:e.payOptions,onDone:()=>{i("execute-tx")},connectOptions:void 0,onBack:void 0}):(0,a.jsx)(T.a,{})}function k(e){let t=w({payModal:!1}),[n,l]=(0,o.useState)("loading"),s=(0,o.useCallback)(async()=>{l("loading");try{let n=await t.mutateAsync(e.tx);e.onTxSent(n),l("sent")}catch(e){console.error(e),l("failed")}},[t,e.tx,e.onTxSent]),c=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{c.current||(c.current=!0,s())},[s]),(0,a.jsxs)(v.Container,{p:"lg",children:[(0,a.jsx)(v.ModalHeader,{title:"Transaction"}),(0,a.jsx)(m.L,{y:"xxl"}),(0,a.jsx)(m.L,{y:"xxl"}),(0,a.jsxs)(v.Container,{flex:"row",center:"x",children:["loading"===n&&(0,a.jsx)(y.Spinner,{size:"3xl",color:"accentText"}),"failed"===n&&(0,a.jsx)(u.E,{size:r.EA["3xl"]}),"sent"===n&&(0,a.jsx)(v.Container,{color:"success",flex:"row",center:"both",children:(0,a.jsx)(i.NhS,{width:r.EA["3xl"],height:r.EA["3xl"]})})]}),(0,a.jsx)(m.L,{y:"lg"}),(0,a.jsxs)(b.Text,{color:"primaryText",center:!0,size:"lg",children:["loading"===n&&"Sending transaction","failed"===n&&"Transaction failed","sent"===n&&"Transaction sent"]}),(0,a.jsx)(m.L,{y:"xxl"}),(0,a.jsx)(m.L,{y:"xxl"}),"failed"===n&&(0,a.jsx)(f.Button,{variant:"accent",fullWidth:!0,onClick:s,children:"Try Again"}),"sent"===n&&(0,a.jsx)(f.Button,{variant:"accent",fullWidth:!0,onClick:e.closeModal,children:"Done"})]})}}}]);